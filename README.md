# 保険ロープレ（断る人 練習用）

営業担当者が保険営業のロープレ練習を行うためのWebチャットアプリ。AWS Bedrock上のOpenAI gpt-oss-120bを使用し、「どんな提案にも丁寧に・一貫して保険加入を断る人物」を演じます。

## 必要な環境

- Node.js 18.x以上
- AWS アカウントとBedrockへのアクセス権限
- Bedrockで`openai.gpt-oss-120b-1:0`へのアクセス許可

## セットアップ

### 1. 依存関係のインストール

```bash
npm install
```

### 2. AWS認証情報の設定

以下のいずれかの方法でAWS認証情報を設定：

**環境変数**:
```bash
export AWS_ACCESS_KEY_ID=your_access_key_id
export AWS_SECRET_ACCESS_KEY=your_secret_access_key
export AWS_REGION=ap-northeast-1
```

**AWSプロファイル**:
```bash
export AWS_PROFILE=your_profile_name
```

### 3. 環境変数ファイルの作成

```bash
cp .env.example .env.local
```

`.env.local`を編集して必要な値を設定してください。

### 4. Bedrockモデルアクセスの有効化

AWSコンソールで以下を実施：

1. Bedrockコンソールへアクセス
2. 左メニューから「Model access」を選択
3. `openai.gpt-oss-120b-1:0`にアクセスを許可

## 起動

```bash
npm run dev
```

ブラウザで http://localhost:3000 を開いてください。

## ビルド

```bash
npm run build
npm start
```

## テスト

```bash
npm test
```

## 環境変数

| 変数名 | 必須 | デフォルト | 説明 |
|--------|------|------------|------|
| AWS_REGION | はい | - | AWSリージョン（例: ap-northeast-1） |
| BEDROCK_MODEL_ID | いいえ | openai.gpt-oss-120b-1:0 | 使用するBedrockモデルID |
| BEDROCK_MAX_TOKENS | いいえ | 1536 | 最大トークン数（自然な会話用） |
| BEDROCK_TEMPERATURE | いいえ | 0.4 | 応答のランダム性（0.0-1.0） |

## 機能

- シングルセッションのチャット画面
- 見込み客の設定（年齢・性別・結婚状況）
- 会話履歴のlocalStorage保存
- 新規ロープレボタンで会話リセット

## 応答の仕様

### 金融リテラシーが高い見込み客
- **特徴**：投資・金融商品に詳しい、費用対効果を重視
- **評価軸**：
  - 保険 vs 投資信託/つみたてNISAとの比較
  - 実質利回り、返戻率、複利効果
  - 保険料の内訳（保障部分 vs 経費・手数料）
  - 高額療養費制度、医療費控除との関係
  - ネット保険との価格差
- **質問スタイル**：核心を突く2件程度の鋭い質問
- **結論**：中立（条件次第で成約もあり得る）

### 典型的な質問例
- 「月5万円×30年=1800万円ですが、保険金1000万円との差額800万円は何に使われますか？」
- 「同じ予算で投資信託（年利5%想定）に回した方が有利では？」
- 「高額療養費制度があれば医療費は月10万円程度で済みますよね？」
- 「ネット保険だと同じ保障でいくらですか？」

### 会話コマンド
- **`/audit`**: 構造化ビュー表示
- **`/summary`**: 事実メモのみ表示
- **`/coach`**: 営業コーチング
- **`/accept`**: 前向きな合意
- **`/decline`**: 見送り

### ペルソナ設定
年齢・性別・結婚状況に応じて自動生成：
- つみたてNISA・iDeCo運用状況
- 投資信託での資産運用
- 保険より投資を優先する考え方

## 注意事項

- 本アプリは練習用です。出力内容の正確性は保証しません。
- 個人情報や専門的な助言は含まれません。
- ローカル環境でのみ動作します（データベース不要）。
